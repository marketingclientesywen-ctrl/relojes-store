<!DOCTYPE html>
<html lang="es" class="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Sapi Watches</title>

  <!-- Estilos propios -->
  <link rel="stylesheet" href="./styles.css?v=1" />

  <!-- Fuente -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>

  <!-- Supabase v2 -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
  <!-- TOPBAR (solo cuando estás logueado) -->
  <header class="topbar hidden" id="topbar">
    <div class="topbar__inner">
      <div class="brand">
        <div class="brand__mark">SW</div>
        <div class="brand__name">Sapi Watches</div>
      </div>

      <nav class="nav">
        <a href="#catalogo">Catálogo</a>
      </nav>

      <div class="top-actions">
        <button id="logoutBtn" class="btn btn-ghost" type="button">Salir</button>
      </div>
    </div>
  </header>

  <main class="page">
    <!-- LOGIN -->
    <section id="loginScreen" class="auth">
      <div class="auth__card">
        <div class="auth__kicker">Acceso</div>
        <h1 class="auth__title">SW <span class="accent">|</span> Sapi Watches</h1>
        <p class="auth__subtitle">Inicia sesión para continuar.</p>

        <div id="loginMsg" class="alert hidden"></div>

        <form id="loginForm" class="auth__form" autocomplete="on">
          <label class="field">
            <span>Email</span>
            <input id="email" type="email" autocomplete="email" placeholder="tu@email.com" required />
          </label>

          <label class="field">
            <span>Contraseña</span>
            <input id="password" type="password" autocomplete="current-password" placeholder="••••••••" required />
          </label>

          <button id="loginBtn" class="btn btn-primary" type="submit">Entrar</button>

          <div class="hint">
            Las cuentas las crea el administrador.
          </div>
        </form>
      </div>
    </section>

    <!-- APP -->
    <section id="appContent" class="hidden">
      <section class="hero" id="catalogo">
        <div class="hero__inner">
          <div>
            <h2 class="hero__title">Catálogo Curado</h2>
            <p class="hero__lead">La simplicidad es la máxima sofisticación.</p>

            <div class="hero__meta">
              <div class="meta">
                <div class="meta__k">Estado</div>
                <div class="meta__v" id="sessionState">—</div>
              </div>
              <div class="meta">
                <div class="meta__k">Rol</div>
                <div class="meta__v" id="roleState">—</div>
              </div>
              <div class="meta">
                <div class="meta__k">Resultados</div>
                <div class="meta__v" id="countState">—</div>
              </div>
            </div>

            <div class="status" id="status"></div>
          </div>

          <div class="toolbox">
            <div class="toolbox__row">
              <input id="search" type="search" placeholder="Buscar por título…" />
              <select id="sort">
                <option value="name_asc">A–Z</option>
              </select>
              <button id="loadMore" class="btn btn-primary" type="button">Cargar más</button>
            </div>

            <div class="hero__card">
              <div class="hero__cardTitle">Notas</div>
              <div class="hero__cardText">
                Si algo falla, abre la consola (F12) y verás logs claros.
              </div>
              <div class="hero__cardHint">
                Recomendado: servir esto por HTTPS (GitHub Pages / Cloudflare / tu hosting).
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="section">
        <div class="section__head">
          <div>
            <h3 class="section__title">Productos</h3>
            <p class="section__subtitle">Listado desde Supabase</p>
          </div>
        </div>

        <div id="grid" class="grid"></div>

        <div class="footer">
          <div class="footer__inner">
            <div><span class="footer__brand">SW</span> · Sapi Watches</div>
            <div id="footerHint">—</div>
          </div>
        </div>
      </section>
    </section>
  </main>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="./script.js?v=1"></script>

</body>
</html>
